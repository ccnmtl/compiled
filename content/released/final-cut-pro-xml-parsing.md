---
author_name: "Schuyler Duveen"
author_url: "http://ccnmtl.columbia.edu/staff/duveen/"
date: "2010-05-14"
tags: ["bsd", "final cut pro", "free-as-in-speech", "video", "xml"]
title: "Final Cut Pro xml parsing"
type: "post"
---

<div><a href="http://ccnmtl.columbia.edu/portfolio/custom_software_applications_and_tools/mediathread.html">MediaThread</a>, our new media analysis platform, previously codenamed '<a href="http://ccnmtl.columbia.edu/compiled/projects/composition_with_video_images.html">Mondrian</a>', now supports <a href="http://developer.apple.com/mac/library/documentation/AppleApplications/Reference/FinalCutPro_XML/Topics/Topics.html">Final Cut Pro's XML Interchange Format</a>. I split the XMEML code out as a library that might be useful to others. Get your free (as in BSD) code here:&nbsp;<a href="http://github.com/ccnmtl/xmeml">http://github.com/ccnmtl/xmeml</a></div><div><br /></div><div>This library helps create an XMEML file based on references to clips from other XMEML files. &nbsp;It was born by getting two problems to cancel each other out.</div><div><br /></div>

<div>This should help solve a problem the CCNMTL video team frequently encounters. Educational Technologists and professors choose specific sequences from raw video footage.&nbsp;The video team then takes the selected clips and composes a finished product.</div><div><br /></div><div>How do they communicate clips? &nbsp;It's generally pretty awkward, and mostly emails with a long list of timecodes goes back and forth which leads to tedious data input on both sides.</div><div><br /></div><div>We'd always dreamed that the video team could use MediaThread for this purpose. Faculty could clip their video in MediaThread, which would then export an XMEML file that the video team could use.</div><div><br /></div><div>The first problem was that XMEML contains many variables that MediaThread wouldn't know such as filename and path and details about audio tracks. &nbsp;None of these variables are contained in the small video encoded for the web--they remain in the raw footage stored by the video team.</div><div><br /></div><div>The second problem came when we tried using MediaThread anyway. Faculty would choose their clips, but the timecodes recorded from the web video track was different from the timecodes for the raw footage. The web video didn't just start at a different time. Even the 'raw' footage that was being presented to the faculty selecting the video had already been clipped and rearranged.</div><div><br /></div><div>We solved the problem by taking the original XMEML file that produced that video and using it to spit all the unknown variables right back into the XMEML file. Thus, we no longer had to guess the variables and the original XMEML file contains all the information about how the raw footage was rearranged.</div><div><br /></div><div>There are still some issues. &nbsp;I'm not importing transitions at the moment, and not even sure what the best thing to do with them is. &nbsp;When they're split by a clip, it's ambiguous what should happen. Patches welcome!</div>
